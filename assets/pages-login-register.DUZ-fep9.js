import{k as e,W as a,x as l,u as s,p as r,q as o,o as t,c as u,w as d,d as i,e as n,n as m,t as c,X as p,O as f,l as b,f as _,V as v,i as g}from"./index-EupBeeyJ.js";import{_ as y}from"./uni-easyinput.DMYPwL6l.js";import{_ as h,a as w}from"./uni-forms.BFsfaF1A.js";import"./theme.BqGFIab-.js";import{_ as V}from"./plugin-vueexport-helper.BCo6x5W8.js";import"./uni-icons.C53QBsee.js";const q=V(e({__name:"register",setup(e){const{initTimer:V,clearTimer:q}=function(){let e;const a=()=>{clearInterval(e),e=null};return{timer:e,initTimer:(l,s=0)=>{a(),e=setInterval((()=>{null==l||l()}),1e3*s)},clearTimer:a}}();a((()=>{q()}));const x=l(),k=s({account:void 0,phone:void 0,code:void 0,password1:void 0,password2:void 0}),j=e=>p.test(e),U=async e=>{x.value.validate().then((async()=>{k.code?(console.log("onSubmit",e),f({title:"注册成功"}),I()):f({title:"请输入验证码"})}))},M=l(0),T=()=>{0!==M.value?M.value=M.value-1:q()},C=async()=>{M.value=60,V(T,1)},I=()=>{b({url:"/pages/login/index"})};return(e,a)=>{const l=_,s=r(o("uni-easyinput"),y),p=r(o("uni-forms-item"),h),f=v,b=r(o("uni-forms"),w),V=g;return t(),u(l,{class:"register"},{default:d((()=>[i(l,{class:"register-title"},{default:d((()=>[n("注册账号")])),_:1}),i(l,{class:"login-form uni-form-custom"},{default:d((()=>[i(b,{ref_key:"formRef",ref:x,"label-width":80,"model-value":k},{default:d((()=>[i(p,{label:"账号",required:"",name:"account",rules:[{required:!0,errorMessage:"请输入账号"}],class:"required"},{default:d((()=>[i(s,{modelValue:k.account,"onUpdate:modelValue":a[0]||(a[0]=e=>k.account=e),class:"form-item-input",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),i(p,{label:"手机号",required:"",name:"phone",rules:[{required:!0,errorMessage:"请输入手机号"},{validateFunction:(e,a,l,s)=>(j(a)||s("手机号格式不正确"),!0)}],class:"required"},{default:d((()=>[i(s,{modelValue:k.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>k.phone=e),type:"number",class:"form-item-input",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1},8,["rules"]),i(p,{label:"验证码",name:"code"},{default:d((()=>[i(s,{modelValue:k.code,"onUpdate:modelValue":a[2]||(a[2]=e=>k.code=e),type:"number",class:"form-item-input",placeholder:"请输入验证码"},{right:d((()=>[0===M.value?(t(),u(f,{key:0,class:m(["form-item-code-button",{"form-item-code-button-disabled":!j(k.phone)}]),style:{"border-radius":"0","margin-left":"8rpx","vertical-align":"text-bottom"},disabled:!j(k.phone),size:"mini",type:"primary",onClick:C},{default:d((()=>[n(" 发送验证码 ")])),_:1},8,["class","disabled"])):(t(),u(f,{key:1,style:{"border-radius":"0","margin-left":"8rpx","vertical-align":"text-bottom"},disabled:"",size:"mini",class:"disabled"},{default:d((()=>[n(c(M.value)+"s后重试 ",1)])),_:1}))])),_:1},8,["modelValue"])])),_:1}),i(p,{label:"密码",required:"",name:"password1",rules:[{required:!0,errorMessage:"请输入密码"}],class:"required"},{default:d((()=>[i(s,{modelValue:k.password1,"onUpdate:modelValue":a[3]||(a[3]=e=>k.password1=e),class:"form-item-input",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),i(p,{label:"确认密码",required:"",name:"password2",rules:[{required:!0,errorMessage:"请再次输入密码"},{validateFunction:(e,a,l,s)=>{var r;return r=a,k.password1&&r&&k.password1!==r&&s("两次密码输入不一致"),!0}}],class:"required"},{default:d((()=>[i(s,{modelValue:k.password2,"onUpdate:modelValue":a[4]||(a[4]=e=>k.password2=e),class:"form-item-input",type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1},8,["rules"]),i(l,{class:"uni-form-btn-wrap"},{default:d((()=>[i(f,{class:"uni-form-btn block",block:"",type:"primary",onClick:U},{default:d((()=>[n("注册")])),_:1})])),_:1})])),_:1},8,["model-value"])])),_:1}),i(l,{class:"tip-btn-wrap"},{default:d((()=>[i(V,null,{default:d((()=>[n(" 已有账号？ "),i(V,{class:"text-btn",onClick:I},{default:d((()=>[n("去登录")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-f736fd43"]]);export{q as default};
