import{k as e,V as a,x as l,u as s,p as r,q as o,o as t,c as u,w as d,d as i,e as n,t as m,W as p,N as c,l as f,f as _,U as v,i as b}from"./index-klAvK6QC.js";import{_ as y}from"./uni-easyinput.C38uCpph.js";import{_ as h,a as w}from"./uni-forms.DWi91UPi.js";import"./theme.CFtDHQC4.js";import{_ as V}from"./plugin-vueexport-helper.BCo6x5W8.js";import"./uni-icons.y0WmNfsH.js";const g=V(e({__name:"register",setup(e){const{initTimer:V,clearTimer:g}=function(){let e;const a=()=>{clearInterval(e),e=null};return{timer:e,initTimer:(l,s=0)=>{a(),e=setInterval((()=>{null==l||l()}),1e3*s)},clearTimer:a}}();a((()=>{g()}));const q=l(),k=s({account:void 0,phone:void 0,code:void 0,password1:void 0,password2:void 0}),x=e=>p.test(e),j=async e=>{q.value.validate().then((async()=>{k.code?(c({title:"注册成功"}),C()):c({title:"请输入验证码"})}))},U=l(0),M=()=>{0!==U.value?U.value=U.value-1:g()},T=async()=>{U.value=60,V(M,1)},C=()=>{f({url:"/pages/login/index"})};return(e,a)=>{const l=_,s=r(o("uni-easyinput"),y),p=r(o("uni-forms-item"),h),c=v,f=r(o("uni-forms"),w),V=b;return t(),u(l,{class:"register"},{default:d((()=>[i(l,{class:"register-title"},{default:d((()=>[n("注册账号")])),_:1}),i(f,{ref_key:"formRef",ref:q,"label-width":80,"model-value":k,class:"login-form uni-form-custom"},{default:d((()=>[i(p,{label:"账号",required:"",name:"account",rules:[{required:!0,errorMessage:"请输入账号"}],class:"required"},{default:d((()=>[i(s,{modelValue:k.account,"onUpdate:modelValue":a[0]||(a[0]=e=>k.account=e),class:"form-item-input",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),i(p,{label:"手机号",required:"",name:"phone",rules:[{required:!0,errorMessage:"请输入手机号"},{validateFunction:(e,a,l,s)=>(x(a)||s("手机号格式不正确"),!0)}],class:"required"},{default:d((()=>[i(s,{modelValue:k.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>k.phone=e),type:"number",class:"form-item-input",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1},8,["rules"]),i(p,{label:"验证码",name:"code"},{default:d((()=>[i(s,{modelValue:k.code,"onUpdate:modelValue":a[2]||(a[2]=e=>k.code=e),type:"number",class:"form-item-input",placeholder:"请输入验证码"},{right:d((()=>[0===U.value?(t(),u(c,{key:0,style:{"border-radius":"0","margin-left":"8rpx"},disabled:!x(k.phone),size:"mini",type:"primary",onClick:T},{default:d((()=>[n(" 发送验证码 ")])),_:1},8,["disabled"])):(t(),u(c,{key:1,style:{"border-radius":"0","margin-left":"8rpx"},disabled:"",size:"mini",class:"disabled"},{default:d((()=>[n(m(U.value)+"s后重试 ",1)])),_:1}))])),_:1},8,["modelValue"])])),_:1}),i(p,{label:"密码",required:"",name:"password1",rules:[{required:!0,errorMessage:"请输入密码"}],class:"required"},{default:d((()=>[i(s,{modelValue:k.password1,"onUpdate:modelValue":a[3]||(a[3]=e=>k.password1=e),class:"form-item-input",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),i(p,{label:"确认密码",required:"",name:"password2",rules:[{required:!0,errorMessage:"请再次输入密码"},{validateFunction:(e,a,l,s)=>{var r;return r=a,k.password1&&r&&k.password1!==r&&s("两次密码输入不一致"),!0}}],class:"required"},{default:d((()=>[i(s,{modelValue:k.password2,"onUpdate:modelValue":a[4]||(a[4]=e=>k.password2=e),class:"form-item-input",type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1},8,["rules"]),i(l,{class:"uni-form-btn-wrap"},{default:d((()=>[i(c,{class:"uni-form-btn block",block:"",type:"primary",onClick:j},{default:d((()=>[n("注册")])),_:1})])),_:1})])),_:1},8,["model-value"]),i(l,{class:"tip-btn-wrap"},{default:d((()=>[i(V,null,{default:d((()=>[n(" 已有账号？ "),i(V,{class:"text-btn",onClick:C},{default:d((()=>[n("去登录")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-2e096acf"]]);export{g as default};
