import{d as e,z as a,r as l,a as s,f as o,m as r,q as t,j as d,i as u,s as n,h as p,t as i,F as m,V as c,N as f,A as _,v,B as b}from"./index-69fcfcc5.js";import{_ as h,a as w}from"./index.f5b56555.js";import{_ as g}from"./index.4444808f.js";import{_ as V}from"./index.7a1ee1d1.js";import"./theme.ac7e58c2.js";import{_ as j}from"./plugin-vueexport-helper.1b428a4d.js";import"./cell.fa09dbe5.js";import"./icon.0e247b7e.js";import"./form.a76f4415.js";import"./useInject.99f6ed8f.js";import"./useProvide.f8736687.js";const y=j(e({__name:"register",setup(e){const{initTimer:j,clearTimer:y}=function(){let e;const a=()=>{clearInterval(e),e=null};return{timer:e,initTimer:(l,s=0)=>{a(),e=setInterval((()=>{null==l||l()}),1e3*s)},clearTimer:a}}();a((()=>{y()}));const k=l(),x=s({account:void 0,phone:void 0,code:void 0,password1:void 0,password2:void 0}),q=e=>c.test(e),B=e=>!(x.password1&&e&&x.password1!==e),U=e=>{k.value.validate(e)},I=async e=>{k.value.validate().then((async({valid:e,errors:a})=>{e&&(x.code?(f({title:"注册成功"}),A()):f({title:"请输入验证码"}))}))},T=l(0),z=()=>{0!==T.value?T.value=T.value-1:y()},C=async()=>{T.value=60,j(z,1)},A=()=>{_({url:"/pages/login/index"})};return(e,a)=>{const l=v,s=V,c=h,f=g,_=w,j=b;return o(),r(m,null,[t(" register register-title _wn_right disabled nut-form-btn-wrap block tip-btn-wrap text-btn "),d(l,{class:"register"},{default:u((()=>[d(l,{class:"register-title"},{default:u((()=>[n("注册账号")])),_:1}),d(_,{ref_key:"formRef",ref:k,"model-value":x,"custom-class":"register-form nut-form-custom"},{default:u((()=>[d(c,{label:"账号",prop:"account",rules:[{required:!0,message:"请输入账号"}]},{default:u((()=>[d(s,{modelValue:x.account,"onUpdate:modelValue":a[0]||(a[0]=e=>x.account=e),placeholder:"请输入账号",onBlur:a[1]||(a[1]=e=>U("account"))},null,8,["modelValue"])])),_:1}),d(c,{label:"手机号",prop:"phone",rules:[{required:!0,message:"请输入手机号"},{validator:q,message:"手机号格式不正确"}]},{default:u((()=>[d(s,{modelValue:x.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>x.phone=e),type:"number",placeholder:"请输入手机号",onBlur:a[3]||(a[3]=e=>U("phone"))},null,8,["modelValue"])])),_:1},8,["rules"]),d(c,{label:"验证码",prop:"code"},{default:u((()=>[d(s,{modelValue:x.code,"onUpdate:modelValue":a[4]||(a[4]=e=>x.code=e),type:"number",name:"code",placeholder:"请输入验证码"},{right:u((()=>[0===T.value?(o(),p(f,{key:0,disabled:!q(x.phone),size:"small",type:"primary",shape:"square",onClick:C},{default:u((()=>[n(" 发送验证码 ")])),_:1},8,["disabled"])):(o(),p(f,{key:1,disabled:"",size:"small",shape:"square",class:"disabled"},{default:u((()=>[n(i(T.value)+"s后重试 ",1)])),_:1}))])),_:1},8,["modelValue"])])),_:1}),d(c,{label:"密码",prop:"password1",rules:[{required:!0,message:"请输入密码"}]},{default:u((()=>[d(s,{modelValue:x.password1,"onUpdate:modelValue":a[5]||(a[5]=e=>x.password1=e),type:"password",placeholder:"请输入密码",onBlur:a[6]||(a[6]=e=>U("password1"))},null,8,["modelValue"])])),_:1}),d(c,{label:"确认密码",prop:"password2",rules:[{required:!0,message:"请再次输入密码"},{validator:B,message:"两次密码输入不一致"}]},{default:u((()=>[d(s,{modelValue:x.password2,"onUpdate:modelValue":a[7]||(a[7]=e=>x.password2=e),type:"password",placeholder:"请再次输入密码",onBlur:a[8]||(a[8]=e=>U("password2"))},null,8,["modelValue"])])),_:1},8,["rules"]),d(l,{class:"nut-form-btn-wrap"},{default:u((()=>[d(f,{"custom-class":"nut-form-btn",block:"",type:"primary",onClick:I,class:"block"},{default:u((()=>[n("注册")])),_:1})])),_:1})])),_:1},8,["model-value"]),d(l,{class:"tip-btn-wrap"},{default:u((()=>[d(j,null,{default:u((()=>[n(" 已有账号？ "),d(j,{class:"text-btn",onClick:A},{default:u((()=>[n("去登录")])),_:1})])),_:1})])),_:1})])),_:1})],2112)}}}),[["__scopeId","data-v-770d4b3a"]]);export{y as default};
