import{d as e,E as a,G as t,b as o,r as l,w as n,o as s,f as r,h as i,i as u,l as c,q as d,j as p,n as f,k as m,u as y,s as g,t as h,C as v,v as b,I as _,B as j,x as w}from"./index-CcNqTXc_.js";import{u as C}from"./form.DgMEBq-C.js";import{c as k,a as S,m as B,l as x,t as O,o as I,C as $,B as E,F as T,q as z,w as H,U as q,i as A,f as L,I as V,N as F,P as N,d as P}from"./icon.ClHjHGyE.js";import{_ as G}from"./plugin-vueexport-helper.BCo6x5W8.js";const K="H5"===function(){let e;return e="H5","H5"}(),M={...k,type:S("text"),modelValue:B(""),inputClass:{type:[String,Object,Array],default:""},inputStyle:{type:[String,Object,Array],default:""},placeholder:S(""),placeholderStyle:S(""),placeholderClass:S("input-placeholder"),inputAlign:S("left"),required:Boolean,disabled:x,readonly:Boolean,error:Boolean,maxLength:B(140),clearable:Boolean,clearSize:B("14"),border:O,formatTrigger:S("onChange"),formatter:{type:Function,default:null},showWordLimit:Boolean,autofocus:Boolean,confirmType:S("done"),adjustPosition:O,alwaysSystem:Boolean,showClearIcon:Boolean,inputMode:S("text"),cursorSpacing:I(0),alwaysEmbed:Boolean,confirmHold:Boolean,cursor:Number,selectionStart:I(-1),selectionEnd:I(-1),holdKeyboard:Boolean},W={[$]:e=>e instanceof Object,clickInput:e=>e instanceof Object,[E]:e=>e instanceof Object,[T]:e=>e instanceof Object,[z]:()=>!0,[H]:e=>e instanceof Object,[q]:(e,a)=>(A(e)||L(e))&&(a instanceof Object||void 0===a),[V]:(e,a)=>(A(e)||L(e))&&a instanceof Object};function U(e,a,t){const o=e.indexOf(a);return-1===o?e:"-"===a&&0!==o?e.slice(0,o):e.slice(0,o+1)+e.slice(o).replace(t,"")}function D(e,a=!0,t=!0){e=a?U(e,".",/\./g):e.split(".")[0];const o=a?/[^-0-9.]/g:/[^-0-9]/g;return(e=t?U(e,"-",/-/g):e.replace(/-/,"")).replace(o,"")}const J=`${N}-input`,Q=e({name:J,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),R=G(e({...Q,props:M,emits:W,setup(e,{emit:k}){const S=e,B=k,x=a();function O(e){return Boolean(x[e])}const I=C(t(S,"disabled"));function A(){return null==S.modelValue?"":String(S.modelValue)}const L=o((()=>A())),N=o((()=>P(S,J,{[`${J}--disabled`]:I.value,[`${J}--required`]:S.required,[`${J}--error`]:S.error,[`${J}--border`]:S.border}))),G=o((()=>[S.inputStyle,{textAlign:S.inputAlign}])),M=o((()=>null==S.maxLength?-1:Number(S.maxLength)));function W(e,a="onChange"){M.value>0&&e.length>M.value&&(e=e.slice(0,M.value)),"number"===S.type&&(e=D(e,!1,!1)),"digit"===S.type&&(e=D(e,!0,!0)),S.formatter&&a===S.formatTrigger&&(e=S.formatter(e)),B(q,e)}function U(e){W(e.detail.value),w((()=>{B(V,L.value,e)}))}function Q(e){if(K){e.target.composing||U(e)}else U(e)}function R(e){B($,e)}function X(e){I.value||B("clickInput",e)}const Y=l(!1),Z=l(!1);function ee(e){I.value||S.readonly||(B(T,e),Y.value=!0)}function ae(e){I.value||S.readonly||(B(E,e),setTimeout((()=>{Y.value=!1}),200),Z.value?Z.value=!1:W(e.detail.value,"onBlur"))}function te(e){B(H,e)}function oe(e){I.value||(B(q,"",e),B(z),Z.value=!0)}function le(e){if(K){e.target.composing=!0}}function ne(e){if(K){const a=e.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}}return n((()=>S.modelValue),(e=>{e!==L.value&&W(A())})),s((()=>{W(A(),S.formatTrigger)})),(e,a)=>{const t=b,o=_,l=j;return r(),i(t,{class:f(N.value),style:m(S.customStyle),onClick:R},{default:u((()=>[O("left")?(r(),i(t,{key:0,class:"nut-input__left"},{default:u((()=>[c(e.$slots,"left",{},void 0,!0)])),_:3})):d("",!0),p(t,{class:"nut-input__value"},{default:u((()=>[p(o,{class:f(["nut-input__input",S.inputClass]),style:m(G.value),value:L.value,type:S.type,placeholder:S.placeholder,"placeholder-style":S.placeholderStyle,"placeholder-class":S.placeholderClass,disabled:y(I),readonly:S.readonly,focus:S.autofocus,maxlength:M.value,"format-trigger":S.formatTrigger,"auto-blur":!!S.autofocus||void 0,"confirm-type":S.confirmType,"adjust-position":S.adjustPosition,"always-system":S.alwaysSystem,inputmode:S.inputMode,"cursor-spacing":S.cursorSpacing,"always-embed":S.alwaysEmbed,"confirm-hold":S.confirmHold,cursor:S.cursor,"selection-start":S.selectionStart,"selection-end":S.selectionEnd,"hold-keyboard":S.holdKeyboard,onInput:Q,onFocus:ee,onBlur:ae,onClick:X,onChange:ne,onCompositionstart:le,onCompositionend:ne,onConfirm:te},null,8,["class","style","value","type","placeholder","placeholder-style","placeholder-class","disabled","readonly","focus","maxlength","format-trigger","auto-blur","confirm-type","adjust-position","always-system","inputmode","cursor-spacing","always-embed","confirm-hold","cursor","selection-start","selection-end","hold-keyboard"]),S.readonly?(r(),i(t,{key:0,class:"nut-input__mask",onClick:X})):d("",!0),S.showWordLimit&&M.value>0?(r(),i(t,{key:1,class:"nut-input__word-limit"},{default:u((()=>[p(l,{class:"nut-input__word-num"},{default:u((()=>[g(h(L.value.length),1)])),_:1}),g("/"+h(M.value),1)])),_:1})):d("",!0)])),_:1}),S.clearable&&!S.readonly?(r(),i(t,{key:1,class:f(["nut-input__clear",{"nut-hidden":!((Y.value||S.showClearIcon)&&L.value.length>0)}]),onClick:v(oe,["stop"])},{default:u((()=>[O("clear")?c(e.$slots,"clear",{key:0},void 0,!0):(r(),i(F,{key:1,name:"mask-close","custom-class":"nut-input__clear-icon",size:S.clearSize,width:S.clearSize,height:S.clearSize},null,8,["size","width","height"]))])),_:3},8,["class"])):d("",!0),O("right")?(r(),i(t,{key:2,class:"nut-input__right"},{default:u((()=>[c(e.$slots,"right",{},void 0,!0)])),_:3})):d("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-d72eba39"]]);export{R as _};
