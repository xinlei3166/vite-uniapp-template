import{d as a,r as s,a as e,f as o,h as t,i as l,j as r,s as u,R as n,T as c,U as d,M as i,O as m,V as p,A as f,v as _,B as w}from"./index-9ea87e0d.js";import{_ as g,a as j}from"./index.b2398fcb.js";import{_ as v}from"./index.f3d598e9.js";import{_ as x}from"./index.ef4a098e.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import"./cell.368f6c17.js";import"./icon.0c44a418.js";import"./useProvide.c6c9da1b.js";import"./useInject.f017e9b7.js";const h=b(a({__name:"index",setup(a){const b=s(),h=e({account:"admin",password:"123456"}),k=a=>{b.value.validate(a)},V=async()=>{b.value.validate().then((async({valid:a,errors:s})=>{if(!a)return;const e=await n({userAccount:h.account,password:c(h.password)});if(!e||0!==e.code)return;d(e.data.accessToken);const o=i();await o.setUserinfo(),await o.setUserinfo(),m({title:"登录成功"}),p({url:"/pages/home/index"})}))},y=()=>{f({url:"/pages/login/register"})};return(a,s)=>{const e=_,n=x,c=g,d=v,i=j,m=w;return o(),t(e,{class:"login"},{default:l((()=>[r(e,{class:"login-title"},{default:l((()=>[u("登录账号")])),_:1}),r(i,{ref_key:"formRef",ref:b,"model-value":h,"custom-class":"login-form nut-form-custom"},{default:l((()=>[r(c,{label:"账号",prop:"account",rules:[{required:!0,message:"请输入账号"}]},{default:l((()=>[r(n,{modelValue:h.account,"onUpdate:modelValue":s[0]||(s[0]=a=>h.account=a),"custom-class":"form-item-input",placeholder:"请输入账号",onBlur:s[1]||(s[1]=a=>k("account"))},null,8,["modelValue"])])),_:1}),r(c,{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码"}]},{default:l((()=>[r(n,{modelValue:h.password,"onUpdate:modelValue":s[2]||(s[2]=a=>h.password=a),"custom-class":"form-item-input",type:"password",placeholder:"请输入密码",onBlur:s[3]||(s[3]=a=>k("password"))},null,8,["modelValue"])])),_:1}),r(e,{class:"nut-form-btn-wrap"},{default:l((()=>[r(d,{"custom-class":"nut-form-btn",block:"",type:"primary",onClick:V,class:"block"},{default:l((()=>[u(" 登录 ")])),_:1})])),_:1})])),_:1},8,["model-value"]),r(e,{class:"tip-btn-wrap"},{default:l((()=>[r(m,null,{default:l((()=>[u(" 没有账号？ "),r(m,{class:"text-btn",onClick:y},{default:l((()=>[u("去注册")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-cc1c5080"]]);export{h as default};
