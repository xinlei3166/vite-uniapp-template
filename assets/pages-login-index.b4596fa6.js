import{d as a,r as s,a as e,f as o,m as t,q as l,j as r,i as n,s as u,F as i,Q as c,R as d,T as m,L as p,N as f,U as _,A as w,v as b,B as g}from"./index-69fcfcc5.js";import{_ as j,a as v}from"./index.f5b56555.js";import{_ as x}from"./index.4444808f.js";import{_ as k}from"./index.7a1ee1d1.js";import{_ as h}from"./plugin-vueexport-helper.1b428a4d.js";import"./cell.fa09dbe5.js";import"./icon.0e247b7e.js";import"./form.a76f4415.js";import"./useInject.99f6ed8f.js";import"./useProvide.f8736687.js";const y=h(a({__name:"index",setup(a){const h=s(),y=e({account:"admin",password:"123456"}),V=a=>{h.value.validate(a)},U=async()=>{h.value.validate().then((async({valid:a,errors:s})=>{if(!a)return;const e=await c({userAccount:y.account,password:d(y.password)});if(!e||0!==e.code)return;m(e.data.accessToken);const o=p();await o.setUserinfo(),await o.setUserinfo(),f({title:"登录成功"}),_({url:"/pages/home/index"})}))},q=()=>{w({url:"/pages/login/register"})};return(a,s)=>{const e=b,c=k,d=j,m=x,p=v,f=g;return o(),t(i,null,[l(" login login-title nut-form-btn-wrap block tip-btn-wrap text-btn "),r(e,{class:"login"},{default:n((()=>[r(e,{class:"login-title"},{default:n((()=>[u("登录账号")])),_:1}),r(p,{ref_key:"formRef",ref:h,"model-value":y,"custom-class":"login-form nut-form-custom"},{default:n((()=>[r(d,{label:"账号",prop:"account",rules:[{required:!0,message:"请输入账号"}]},{default:n((()=>[r(c,{modelValue:y.account,"onUpdate:modelValue":s[0]||(s[0]=a=>y.account=a),"custom-class":"form-item-input",placeholder:"请输入账号",onBlur:s[1]||(s[1]=a=>V("account"))},null,8,["modelValue"])])),_:1}),r(d,{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码"}]},{default:n((()=>[r(c,{modelValue:y.password,"onUpdate:modelValue":s[2]||(s[2]=a=>y.password=a),"custom-class":"form-item-input",type:"password",placeholder:"请输入密码",onBlur:s[3]||(s[3]=a=>V("password"))},null,8,["modelValue"])])),_:1}),r(e,{class:"nut-form-btn-wrap"},{default:n((()=>[r(m,{"custom-class":"nut-form-btn",block:"",type:"primary",onClick:U,class:"block"},{default:n((()=>[u(" 登录 ")])),_:1})])),_:1})])),_:1},8,["model-value"]),r(e,{class:"tip-btn-wrap"},{default:n((()=>[r(f,null,{default:n((()=>[u(" 没有账号？ "),r(f,{class:"text-btn",onClick:q},{default:n((()=>[u("去注册")])),_:1})])),_:1})])),_:1})])),_:1})],2112)}}}),[["__scopeId","data-v-969867b5"]]);export{y as default};
