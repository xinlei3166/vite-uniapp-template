import{d as e,z as a,r as l,a as s,f as o,h as r,i as t,j as d,s as u,t as p,W as n,O as i,A as m,v as c,B as f}from"./index-9ea87e0d.js";import{_,a as v}from"./index.b2398fcb.js";import{_ as h}from"./index.f3d598e9.js";import{_ as b}from"./index.ef4a098e.js";import"./theme.bdf91f05.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./cell.368f6c17.js";import"./icon.0c44a418.js";import"./useProvide.c6c9da1b.js";import"./useInject.f017e9b7.js";const g=w(e({__name:"register",setup(e){const{initTimer:w,clearTimer:g}=function(){let e;const a=()=>{clearInterval(e),e=null};return{timer:e,initTimer:(l,s=0)=>{a(),e=setInterval((()=>{null==l||l()}),1e3*s)},clearTimer:a}}();a((()=>{g()}));const V=l(),y=s({account:void 0,phone:void 0,code:void 0,password1:void 0,password2:void 0}),j=e=>n.test(e),k=e=>!(y.password1&&e&&y.password1!==e),x=e=>{V.value.validate(e)},q=async e=>{V.value.validate().then((async({valid:e,errors:a})=>{e&&(y.code?(i({title:"注册成功"}),T()):i({title:"请输入验证码"}))}))},B=l(0),U=()=>{0!==B.value?B.value=B.value-1:g()},I=async()=>{B.value=60,w(U,1)},T=()=>{m({url:"/pages/login/index"})};return(e,a)=>{const l=c,s=b,n=_,i=h,m=v,w=f;return o(),r(l,{class:"register"},{default:t((()=>[d(l,{class:"register-title"},{default:t((()=>[u("注册账号")])),_:1}),d(m,{ref_key:"formRef",ref:V,"model-value":y,"custom-class":"register-form nut-form-custom"},{default:t((()=>[d(n,{label:"账号",prop:"account",rules:[{required:!0,message:"请输入账号"}]},{default:t((()=>[d(s,{modelValue:y.account,"onUpdate:modelValue":a[0]||(a[0]=e=>y.account=e),placeholder:"请输入账号",onBlur:a[1]||(a[1]=e=>x("account"))},null,8,["modelValue"])])),_:1}),d(n,{label:"手机号",prop:"phone",rules:[{required:!0,message:"请输入手机号"},{validator:j,message:"手机号格式不正确"}]},{default:t((()=>[d(s,{modelValue:y.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>y.phone=e),type:"number",placeholder:"请输入手机号",onBlur:a[3]||(a[3]=e=>x("phone"))},null,8,["modelValue"])])),_:1},8,["rules"]),d(n,{label:"验证码",prop:"code"},{default:t((()=>[d(s,{modelValue:y.code,"onUpdate:modelValue":a[4]||(a[4]=e=>y.code=e),type:"number",name:"code",placeholder:"请输入验证码"},{right:t((()=>[0===B.value?(o(),r(i,{key:0,disabled:!j(y.phone),size:"small",type:"primary",shape:"square",onClick:I},{default:t((()=>[u(" 发送验证码 ")])),_:1},8,["disabled"])):(o(),r(i,{key:1,disabled:"",size:"small",shape:"square",class:"disabled"},{default:t((()=>[u(p(B.value)+"s后重试 ",1)])),_:1}))])),_:1},8,["modelValue"])])),_:1}),d(n,{label:"密码",prop:"password1",rules:[{required:!0,message:"请输入密码"}]},{default:t((()=>[d(s,{modelValue:y.password1,"onUpdate:modelValue":a[5]||(a[5]=e=>y.password1=e),type:"password",placeholder:"请输入密码",onBlur:a[6]||(a[6]=e=>x("password1"))},null,8,["modelValue"])])),_:1}),d(n,{label:"确认密码",prop:"password2",rules:[{required:!0,message:"请再次输入密码"},{validator:k,message:"两次密码输入不一致"}]},{default:t((()=>[d(s,{modelValue:y.password2,"onUpdate:modelValue":a[7]||(a[7]=e=>y.password2=e),type:"password",placeholder:"请再次输入密码",onBlur:a[8]||(a[8]=e=>x("password2"))},null,8,["modelValue"])])),_:1},8,["rules"]),d(l,{class:"nut-form-btn-wrap"},{default:t((()=>[d(i,{"custom-class":"nut-form-btn",block:"",type:"primary",onClick:q,class:"block"},{default:t((()=>[u("注册")])),_:1})])),_:1})])),_:1},8,["model-value"]),d(l,{class:"tip-btn-wrap"},{default:t((()=>[d(w,null,{default:t((()=>[u(" 已有账号？ "),d(w,{class:"text-btn",onClick:T},{default:t((()=>[u("去登录")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-70d3674c"]]);export{g as default};
