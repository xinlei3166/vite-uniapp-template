import{a1 as a,a2 as t,a as e,r as s,d as n,a3 as l,b as o,w as r,f as u,h as i,i as d,j as c,n as _,m,F as p,p as y,k as f,s as g,t as b,q as h,u as v,a4 as k,l as D,v as w,a5 as S,a6 as z}from"./index-CcNqTXc_.js";import{c as j,t as x,v as C,N as I,d as $,P as T}from"./icon.ClHjHGyE.js";import{u as O}from"./useTranslate.DRa3dWg0.js";import{_ as A}from"./plugin-vueexport-helper.BCo6x5W8.js";import"./theme.D0d9-Bjl.js";function F(e){return function(e={}){const s=a.parse(e.body),n=[];for(let a=0;a<(s.pageSize||10);a++){const e={id:a+1,name:t.genName(),phone:t.genPhone(),email:t.genEmail(),age:t.genAge(1,99),hobby:t.genSentence(),updateTime:t.genTime(),img:t.genImg()};n.push(e)}return t.response({code:0,data:{list:n,total:100}})}()}const K={size:"small",current:1,defaultCurrent:1,pageSize:10,total:0,showTotal:a=>`共${a}条`,showLessItems:!0,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"]};function N(a,{params:t,pagination:n={},dataKey:l="list",cb:o,method:r="get",codeKey:u="code",successCode:i=0}){const d=n||{},{loading:c,data:_,pagination:m}=function(a){const t=e({...K,...a||{}});return{loading:s(!1),data:s([]),pagination:t}}({...d}),p=s(),y=async(e={})=>{var s;c.value=!0;let d={pageSize:n?m.pageSize:void 0,page:n?m.current:void 0,...null==t?void 0:t.value,...e};"get"===r&&(d={params:d});const y=await a(d);c.value=!1,y&&y[u]===i&&(p.value=y.data,_.value=l?y.data[l]||[]:y.data,m.total=(null==(s=y.data)?void 0:s.total)||0,null==o||o({sourceData:p,data:_}))};return{loading:c,sourceData:p,data:_,pagination:m,init:y,onSearch:async(a={})=>{m.current=1,await y(a)}}}const P=n({props:{slots:Array,record:Object},setup:a=>()=>l("view",{},a.slots[0]?a.slots[0](a.record):a.slots[1](a.record))}),q={...j,bordered:x,columns:C([]),data:C([]),summary:{type:Function,default:null},striped:Boolean},B={sorter:a=>a instanceof Object},E=`${T}-table`,{translate:G}=O(E),H=n({name:E,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),J=A(n({...H,props:q,emits:B,setup(a,{emit:t}){const s=a,n=t,l=e({curData:s.data}),z=o((()=>$(s,E)));function j(a){return{"nut-table__main__head__tr--border":s.bordered,[`nut-table__main__head__tr--align${a.align?a.align:""}`]:!0}}function x(a){return s.columns.filter((t=>t.key===a))[0]}function C(a){const t=s.columns.filter((t=>t.key===a));return t[0].stylecolumn?t[0].stylecolumn:""}return r((()=>s.data),(a=>{l.curData=a.slice()})),(a,t)=>{const e=w,o=S;return u(),i(e,{class:_(z.value),style:f(a.customStyle)},{default:d((()=>[c(e,{class:_(["nut-table__main",{"nut-table__main--striped":a.striped}])},{default:d((()=>[c(e,{class:"nut-table__main__head"},{default:d((()=>[c(e,{class:"nut-table__main__head__tr"},{default:d((()=>[(u(!0),m(p,null,y(a.columns,(a=>(u(),i(e,{key:a.key,class:_(["nut-table__main__head__tr__th",j(a)]),style:f(a.stylehead),onClick:t=>function(a){a.sorter&&(n("sorter",a),l.curData="function"==typeof a.sorter?l.curData.sort(a.sorter):"default"===a.sorter?l.curData.sort():l.curData)}(a)},{default:d((()=>[g(b(a.title)+" ",1),a.sorter?(u(),i(I,{key:0,name:"down-arrow",size:"12px"})):h("",!0)])),_:2},1032,["class","style","onClick"])))),128))])),_:1})])),_:1}),c(e,{class:"nut-table__main__body"},{default:d((()=>[(u(!0),m(p,null,y(l.curData,(a=>(u(),i(e,{key:a,class:"nut-table__main__body__tr"},{default:d((()=>[(u(!0),m(p,null,y(s.columns.map((a=>[a.key,a.render])),(([t,s])=>(u(),i(e,{key:t,class:_(["nut-table__main__body__tr__td",j(x(t))]),style:f(C(t))},{default:d((()=>["function"==typeof a[t]||"function"==typeof s?(u(),i(v(P),{key:0,slots:[s,a[t]],record:a},null,8,["slots","record"])):(u(),i(e,{key:1},{default:d((()=>[g(b(a[t]),1)])),_:2},1024))])),_:2},1032,["class","style"])))),128))])),_:2},1024)))),128))])),_:1})])),_:1},8,["class"]),a.summary?(u(),i(e,{key:0,class:"nut-table__summary"},{default:d((()=>[c(o,{class:"nut-table__summary__text",nodes:a.summary().value},null,8,["nodes"])])),_:1})):h("",!0),l.curData.length?h("",!0):(u(),i(e,{key:1,class:"nut-table__nodata"},{default:d((()=>[k("div",{class:_(["nut-table__nodata",{"nut-table__nodata--border":a.bordered}])},[D(a.$slots,"nodata",{},void 0,!0),a.$slots.nodata?h("",!0):(u(),m("div",{key:0,class:"nut-table__nodata__text"},b(v(G)("noData")),1))],2)])),_:3}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ad9b7372"]]),L=A(n({__name:"index",setup(a){const t=o((()=>({}))),{loading:s,data:n,pagination:r,init:_,onSearch:m}=N(F,{params:t,pagination:{pageSize:10}});z((async()=>{await _()}));const p=[{title:"ID",key:"id"},{title:"姓名",key:"name",render:a=>l("text",{},a.name)},{title:"邮箱",key:"email"}];return e({name1:void 0}),(a,t)=>{const e=J,s=w;return u(),i(s,{class:"table-card"},{default:d((()=>[c(e,{columns:p,data:v(n)},null,8,["data"])])),_:1})}}}),[["__scopeId","data-v-b0d1d0a2"]]);export{L as default};
