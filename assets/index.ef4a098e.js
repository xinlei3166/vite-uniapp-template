import{d as e,r as t,a,b as o,w as l,o as n,f as s,h as i,i as r,j as c,l as u,q as d,k as m,u as p,s as f,t as g,E as h,G as y,n as b,v,I as x,B as C}from"./index-9ea87e0d.js";import{c as k,a as w,m as B,t as S,j as _,C as j,B as L,F as $,k as I,u as E,U as O,i as T,e as z,N as F,g as H,P as N}from"./icon.0c44a418.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";const q="H5"===function(){let e;return e="H5","H5"}(),M={...k,type:w("text"),modelValue:B(""),placeholder:w(""),placeholderStyle:w(""),placeholderClass:w("input-placeholder"),inputAlign:w("left"),required:Boolean,disabled:Boolean,readonly:Boolean,error:Boolean,maxLength:B(140),clearable:Boolean,clearSize:B("14"),border:S,formatTrigger:w("onChange"),formatter:{type:Function,default:null},showWordLimit:Boolean,autofocus:Boolean,confirmType:w("done"),adjustPosition:S,alwaysSystem:Boolean,showClearIcon:Boolean,inputMode:w("text"),cursorSpacing:_(0),alwaysEmbed:Boolean,confirmHold:Boolean,cursor:Number,selectionStart:_(-1),selectionEnd:_(-1),holdKeyboard:Boolean},P={[j]:e=>e instanceof Object,clickInput:e=>e instanceof Object,[L]:e=>e instanceof Object,[$]:e=>e instanceof Object,[I]:()=>!0,keypress:()=>!0,[E]:e=>e instanceof Object,[O]:(e,t)=>(T(e)||z(e))&&(t instanceof Object||void 0===t)};function A(e,t,a){const o=e.indexOf(t);return-1===o?e:"-"===t&&0!==o?e.slice(0,o):e.slice(0,o+1)+e.slice(o).replace(a,"")}function G(e,t=!0,a=!0){e=t?A(e,".",/\./g):e.split(".")[0];const o=t?/[^-0-9.]/g:/[^-0-9]/g;return(e=a?A(e,"-",/-/g):e.replace(/-/,"")).replace(o,"")}const K=`${N}-input`,W=e({name:K,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),R=V(e({...W,props:M,emits:P,setup(e,{emit:k}){const w=e,B=t(!1),S=t(),_=()=>String(w.modelValue?w.modelValue:""),T=a({focused:!1,validateFailed:!1,validateMessage:""}),z=o((()=>H(w,K,{[`${K}--disabled`]:w.disabled,[`${K}--required`]:w.required,[`${K}--error`]:w.error,[`${K}--border`]:w.border}))),N=o((()=>({textAlign:w.inputAlign})));function V(e,t){return"digit"===e?"decimal":"number"===e?"numeric":t}function M(e){q&&e.detail.composing||P(e)}function P(e){A(e.detail.value)}function A(e,t="onChange"){k(O,e),w.maxLength&&e.length>Number(w.maxLength)&&(e=e.slice(0,Number(w.maxLength))),"number"===w.type&&(e=G(e,!1,!1)),"digit"===w.type&&(e=G(e,!0,!0)),w.formatter&&t===w.formatTrigger&&(e=w.formatter(e)),e!==w.modelValue&&k(O,e)}function W(e){w.disabled||k("clickInput",e)}function R(e){k(j,e)}function U({target:e}){q&&(e.composing=!0)}function D({target:e}){q&&e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function J(e){w.disabled||w.readonly||(B.value=!0,k($,e))}function Q(e){if(w.disabled||w.readonly)return;setTimeout((()=>{B.value=!1}),200);let t=e.detail.value;w.maxLength&&t.length>Number(w.maxLength)&&(t=t.slice(0,Number(w.maxLength))),A(_(),"onBlur"),k(L,e)}function X(e){e.stopPropagation(),w.disabled||(k(O,"",e),k(I))}function Y(e){k(E,e)}return l((()=>w.modelValue),(()=>{A(_()),T.validateFailed&&(T.validateFailed=!1,T.validateMessage="")})),n((()=>{A(_(),w.formatTrigger)})),(e,t)=>{const a=v,o=x,l=C;return s(),i(a,{class:b(p(z)),style:m(e.customStyle),onClick:R},{default:r((()=>[c(a,{class:"nut-input-value"},{default:r((()=>[c(a,{class:"nut-input-inner"},{default:r((()=>[e.$slots.left?(s(),i(a,{key:0,class:"nut-input-left-box"},{default:r((()=>[u(e.$slots,"left",{},void 0,!0)])),_:3})):d("v-if",!0),c(a,{class:"nut-input-box"},{default:r((()=>{return[c(o,{ref_key:"inputRef",ref:S,type:(t=w.type,"number"===t?"tel":"digit"===t?"text":t),class:"input-text",style:m([p(N),w.customStyle]),placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":e.placeholderClass,disabled:e.disabled,readonly:e.readonly,focus:e.autofocus,maxlength:e.maxLength?+e.maxLength:-1,value:e.modelValue.toString(),"format-trigger":e.formatTrigger,"auto-blur":!!e.autofocus||void 0,"confirm-type":e.confirmType,"adjust-position":e.adjustPosition,"always-system":e.alwaysSystem,"input-mode":V(w.type,w.inputMode),"cursor-spacing":e.cursorSpacing,"always-embed":e.alwaysEmbed,"confirm-hold":e.confirmHold,cursor:e.cursor,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"hold-keyboard":e.holdKeyboard,onInput:M,onFocus:J,onBlur:Q,onClick:W,onChange:D,onCompositionend:D,onCompositionstart:U,onConfirm:Y},null,8,["type","style","placeholder","placeholder-style","placeholder-class","disabled","readonly","focus","maxlength","value","format-trigger","auto-blur","confirm-type","adjust-position","always-system","input-mode","cursor-spacing","always-embed","confirm-hold","cursor","selection-start","selection-end","hold-keyboard","onClick","onChange","onCompositionend","onCompositionstart"]),w.readonly?(s(),i(a,{key:0,class:"nut-input-disabled-mask",onClick:W},null,8,["onClick"])):d("v-if",!0),e.showWordLimit&&e.maxLength?(s(),i(a,{key:1,class:"nut-input-word-limit"},{default:r((()=>[c(l,{class:"nut-input-word-num"},{default:r((()=>[f(g(_()?_().length:0),1)])),_:1}),f("/"+g(e.maxLength),1)])),_:1})):d("v-if",!0)];var t})),_:1}),e.clearable&&!e.readonly?h((s(),i(a,{key:1,class:"nut-input-clear-box",onClick:X},{default:r((()=>[u(e.$slots,"clear",{},(()=>[c(F,{name:"mask-close","custom-class":"nut-input-clear",size:e.clearSize,width:e.clearSize,height:e.clearSize},null,8,["size","width","height"])]),!0)])),_:3},8,["onClick"])),[[y,(B.value||e.showClearIcon)&&_().length>0]]):d("v-if",!0),c(a,{class:"nut-input-right-box"},{default:r((()=>[u(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3})])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-10ee425c"]]);export{R as _};
